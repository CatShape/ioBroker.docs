---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.wireless-mbus/README.md
title: ioBroker.wireless-MBUS
hash: wy27De1OJrS3cu5mCi9Q6JYv4VVWnaIpNpmMzo3gAZU=
---
![Логотип](../../../en/adapterref/iobroker.wireless-mbus/admin/wireless-mbus.png)

![количество установленных](https://iobroker.live/badges/wireless-mbus-installed.svg)
![стабильная версия](https://iobroker.live/badges/wireless-mbus-stable.svg)

# IoBroker.wireless-mbus
Этот адаптер позволяет получать беспроводные данные M-Bus от поддерживаемых приемников. Степень реализации устройства различается, но режимы wMBus можно настроить для всех перечисленных устройств.

* Встроить модули WMB
* Amber Wireless AMB8465 (**Осторожно:** командный режим (UART_CMD_Out_Enable) включен!)
* ИМСТ iM871A
* КУЛ

Стек WMBUS был «перенесен» из проекта FHEM и был в значительной степени исправлен и реорганизован. Тестирование проводилось с необработанными данными, полученными из Интернета, образцами данных OMS и некоторыми тестовыми данными из библиотеки jmbus. Некоторые крайние случаи еще не проверены.

Создание устройства, обновление и т. д. в основном основано на адаптере M-Bus компании Apollon77 (см. ниже).

Если адаптер получает зашифрованные телеграммы, на вкладке конфигурации ключа AES должен автоматически отображаться идентификатор устройства.

Если синтаксический анализатор дает сбой, необработанные данные телеграммы будут сохранены в состоянии info.rawdata.

*Внимание:* Кажется, что приемник Amber зависает через некоторое время (или количество полученных сообщений) в режиме C? Аппаратный недостаток?

## Ссылки:
* [Модуль стека WMBus] (https://github.com/mhop/fhem-mirror/blob/master/fhem/FHEM/WMBus.pm)
* [ioBroker.mbus] (https://github.com/Apollon77/ioBroker.mbus)
* [Исходный стек WMBUS: wm-bus] (https://github.com/soef/wm-bus)
* [Протокол M-Bus] (http://www.m-bus.com/files/MBDOC48.PDF)
* [Спецификации OMS](https://oms-group.org/en/download4all/oms-specification/)

## Начальная настройка
Первоначальная настройка требует настройки основ (аппаратного подключения к wmbus) и настройки ключей AES для всех зашифрованных узлов wmbus, которые необходимо собрать. Самая сложная часть — это ключи AES.

### Базовая настройка
Для этого необходимо выбрать соответствующее USB-устройство и правильную скорость передачи данных (**обычно** для IMST: 57600 бод; желтый: 9600 бод; Embit: 9600 бод). Большинство счетчиков будут отправлять данные в «режиме T».

### Другие варианты
* **Обновить неизмененные состояния**: При поступлении телеграммы все состояния будут обновлены, даже если их значение не изменилось. (по умолчанию: включено)
* **Кэш для поддержки компактных фреймов**: Для поддержки компактных телеграмм (используемых некоторыми (Kamstrup?) устройствами) структура всех полученных телеграмм кэшируется. Обычно это означает только одну запись кэша на устройство. Если у вас нет устройства, которое отправляет компактные телеграммы, вы можете отключить его, чтобы сэкономить немного производительности и памяти. (по умолчанию: выключено)
* **Перевести единицы энергии в кВтч**: Все единицы энергии (Втч и Дж) будут преобразованы в кВтч. (по умолчанию: выключено)
* **Временно блокировать устройство после последовательных сбоев**: если 10 последовательных телеграмм одного и того же устройства не проанализированы успешно, устройство будет игнорироваться до перезапуска адаптера (по умолчанию: включено)

### AES-ключи
Идентификатор устройства представляет собой комбинацию кода производителя и идентификатора устройства (например, AAA-12345678). Ключ можно ввести либо в виде обычного текста с 16 символами, либо в виде шестнадцатеричной строки с 32 символами (16 байт).

Самый простой способ настроить ключи — запустить адаптер без настройки ключа и дождаться зашифрованной телеграммы, после чего адаптером будет сгенерирована запись с ключом «НЕИЗВЕСТНО». Затем можно заполнить соответствующий ключ и сохранить настройки. Если вы видите устройства, которые вам не известны или от которых вы просто хотите избавиться (например, устройства от соседей), вы можете указать их на вкладке заблокированных устройств.

## Делать
* отправка телеграмм для приемников S-режима?

## НЗП
* (ЧЛ/кубакс) Экспериментально! Включите последовательный порт через сырой TCP-сокет для всех устройств — используйте `tcp://host:port` в качестве пользовательского последовательного порта.

## 0.8.10
* (ChL) Используйте компактный кэш кадров независимо от кода производителя

## 0.8.9
* (ChL) Исправлено отображение нестандартных настроек на странице администратора

## 0.8.8
* (ChL) Добавлена обработка типа datetime I

### 0.8.7
* (ChL) Немного улучшена обработка значений LVAR DIF.

### 0.8.3 / 0.8.4 / 0.8.5 / 0.8.6
* (ChL) Обновите зависимости разработчиков — тест Внимание CI больше не будет поддерживать <= NodeJS 12
* (ChL) Незначительные изменения логирования

### 0.8.2
* (ChL) Поддержка C-режима для CUL

### 0.8.1
* (ChL) Исправлено состояние соединения
* (ChL) Повторно добавить последовательное ведение журнала

### 0.8.0
* (ChL) Полная переработка последовательной связи — теперь включает тестируемые классы устройств.
* (ChL) Обновление до SerialPort 10.x и очистка зависимостей
* (ChL) Улучшить декодер PRIOS

### 0.7.9
* (ChL) Добавлен журнал отладки для всех последовательных устройств.

### 0.7.8
* (ChL) Улучшено логирование с приемных модулей
* (ChL) исправить состояние сырых данных

### 0.7.7
* (ChL) Добавлена поддержка закодированных телеграмм Diehl PRIOS (перенесено с wmbusmeters)

### 0.7.5 / 0.7.6
* (ChL) Исправлена обработка тайм-аута - если проблем не возникнет, это будет переиздано как 1.0.0.

### 0.7.3 / 0.7.4
* (ChL) Попробуйте улучшить поддержку CUL

### 0.7.1 / 0.7.2
* (ChL) Переименуйте в ioBroker.wireless-mbus, чтобы иметь возможность публиковать в npm
* (ChL) Исправлен черный список, логотип страницы администратора и URL репозитория в package.json.

### 0.7.0
* (ChL) Изменить основной код адаптера на класс
* (ChL) Включите фактические (машинные) переводы, помимо английского и немецкого.
* (ChL) Обновление зависимостей
* (ChL) Добавлен тест для декодера wmbus
* (ChL) Добавить интеграционные тесты
* (ChL) Добавлен рабочий процесс github

### 0.6.2
* (ChL) Улучшена страница администратора для обработки пользовательского пути к последовательному порту.
* (ChL) Добавлена возможность отключить автоматическую блокировку устройств
* (ChL) Добавлен приемник "Simple Hexstring" для целей тестирования.
* (ChL) Внутренний рефакторинг

### 0.6.0 / 0.6.1
* (ChL) Обновление библиотеки последовательного порта до 9.2.0
* (ChL) экспериментальная поддержка CUL

### 0.5.2
* (ChL) фикс индикатора соединения с js-контроллером 2.x

### 0.5.1
* (ЧЛ) Мелкие исправления
* (ChL) Внутренний анализатор телеграмм теперь поддерживает проводные кадры M-Bus (не используется - для целей тестирования / разработки)
* (D Glaser) Добавлена метка времени последнего обновления информации об устройстве.
* (D Glaser/ChL) В README добавлена документация по настройке.

### 0.5.0
* (ChL) Базовая поддержка устройств Techem
* (ChL) Возможность принудительно преобразовать единицы энергии (Вт-ч и Дж) в кВт-ч — ВНИМАНИЕ, это не обратно совместимо. Старые состояния сохранят свои «старые» единицы измерения, но отобразят скорректированное значение!

### 0.4.7
* (ChL) Блокировать устройства после 10 последовательных неудачных попыток синтаксического анализа до перезапуска адаптера
* (ChL) Назначить роли, производные от единиц (как делает адаптер mbus)

### 0.4.6
* (ChL) Поддержка (Kamstrup?) компактных фреймов через кеш записи данных (предустановленные фреймы были удалены!)

### 0.4.5
* (ChL) Добавлять идентификаторы устройств с ключом «НЕИЗВЕСТНО» при запуске к needkey.

### 0.4.2 / 0.4.3 / 0.4.4
* (ЧЛ) Мелкие исправления

### 0.4.1
* (ChL) базовая поддержка IMST iM871A

### 0.4.0
* (ChL) улучшена поддержка Amber Stick
* (ЧЛ) Компактный режим?
* (ChL) Более красивые названия штатов
* (ChL) режим wMBus частично выбирается

### 0.3.0
* (ChL) Реализованы все типы VIF из MBus doc
* (ChL) Расширения VIF обрабатываются лучше (снова)
* (ChL) реорганизована информация о VIF
* (ChL) реорганизована обработка приемника
* (ChL) возможна блокировка устройств

### 0.2.0 (без тегов)
* (ChL) Значительно улучшен парсер: поддержка режима безопасности 7, тип фрейма B, множество мелких исправлений
* (ChL) Расширения VIF обрабатываются лучше, но правильная обработка все еще не до конца ясна
* (ChL) CRC проверяются и удаляются, если они все еще присутствуют
* (ChL) необработанные данные сохраняются в случае сбоя парсера

### 0.1.0
* (ЧЛ) начальный выпуск

## Changelog

## License

Copyright (c) 2019 ISFH - Institute for Solar Energy Research www.isfh.de
Copyright (c) 2021 Christian Landvogt

Licensed under GPLv2. See [LICENSE](LICENSE) and [NOTICE](NOTICE)